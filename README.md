# CinemaProject

## Описание проекта

CinemaProject — это веб-приложение для управления бронированием билетов в кинотеатр, 
сеансами фильмов и местами. Система интегрирована с Kafka и ZooKeeper для обработки 
сообщений, связанных с процессом бронирования и планирования сеансов.

### Текущее состояние проекта

**Реализовано**:
- CRUD операции для основных сущностей (фильмы, сеансы, билеты, места).
- API эндпоинты для работы с фильмами и сеансами.
- Интеграция с Kafka для обработки сообщений (например, уведомления о сеансах и бронировании мест).
- Базовая настройка ZooKeeper для координации Kafka.

### Эндпоинты:

**Фильмы(всё реализовано)**:
1. `POST http://localhost:8080/movies` — Добавление нового фильма.
2. `POST http://localhost:8080/movies/batch` - добавление списка фильмов
3. `PUT http://localhost:8080/movies/?id=2`  - редактирование фильма
4. `GET {{base_url}}/movies` — Получение списка всех фильмов.
5. `GET {{base_url}}/movies/{id}` — Получение информации о конкретном фильме.
6. `GET http://localhost:8080/movies/search?title=In` — Получение списка фильмов с данным совпадением в заголовке.
7. `DELETE http://localhost:8080/movies/?id=1` Удаление фильма по айди 
8. `DELETE http://localhost:8080/movies` - Удаление всех фильмов


**Комнаты(всё реализовано)**
1. `POST http://localhost:8080/rooms` — Добавление новой комнаты
2. `POST http://localhost:8080/rooms/batch` - добавление списка комнат
3. `GET http://localhost:8080/rooms` — Получение комнат для просмотра фильмов
4. `GET http://localhost:8080/rooms/?id=1`  — Получение информации о комнате по айди 
5. `GET http://localhost:8080/rooms/search/?name=VIP`  — Получение информации о комнате по совпадению названия
6. `GET http://localhost:8080/rooms/searchByNumber/?number=101`  — Получение информации о комнате по номера
7. `PUT http://localhost:8080/rooms/?id=2`  - редактирование комнаты
8. `DELETE http://localhost:8080/rooms/?id=1` Удаление комнаты по айди
9. `DELETE http://localhost:8080/rooms` - Удаление всех комнат


Логика такова, что при создании сеанса мы выбираем фильм(movie), зал(room), надбавку к базовой цене зала, 
начало сеанса (start_time). (конец сеанса(end_time) выставляем как длительность фильма
в таблице movie+начало сеанса). Во время создания сеанса также создаются записи в таблице seat(места). 
этих записей создаётся такое количество, какое указано таблице room как seat_count.
seat_number = это номера по порядку до seat_count(для каждого циклом устанавливаются).
на каждую такую запись seat задаются параметры seat_price равное room_price(из таблицы room)+надбавка.
Также при создании сеанса присутствует проверка на свободность зала(проверяется, 
что в данном зале ничего не проводится и не будет проводиться во время длительности сеанса).
можно изменять время начала и цену сеанса.  также решена задача когда задавать стоимость сеанса.

1) дефолтная цена на зал.
2) при созднии сеанса можем ввести надбавку к дефолтной цене.

**Сеансы(всё реализовано)**
1. `POST {{base_url}}/sessions` — Создание нового сеанса.
2. `GET {{base_url}}/sessions` — Список всех сеансов.
3. `GET http://localhost:8080/sessions/by-date?date=2024-10-13` — Список всех сеансов по дате.
4. `PUT http://localhost:8080/movies/?id=2` — Редактирование времени начала и/или цены сеанса.
5. `DELETE http://localhost:8080/movies/?id=1` Удаление сеанса по айди, удаляются также созданные места на конкретный сеанс.
6. `DELETE http://localhost:8080/movies` Удаление сеансов всех, удаляются также созданные места на сеансы.


**Билеты**
1. `POST {{base_url}}/tickets` — Бронирование билета.
2. `GET {{base_url}}/tickets/{id}` — Получение информации о конкретном билете.

**Места**


### Будущие разработки

**Планируемые функции**:
- Реализовать уведомления в реальном времени при успешном бронировании и начале сеанса.
- Продвинутые алгоритмы для работы с выбором мест?
- Интеграция с внешними API для обработки платежей?
- Улучшение работы Kafka для системных уведомлений и логирования.
- Аутентификация и управление сессиями пользователей?

### Текущие задачи и планы

**Что нужно доработать**:
- Улучшить валидацию данных при бронировании? 
- надо ли вводить роль администратора для управления системой(удалить/добавить сеанс) а для остальным пользователей нет?
- Добавить обработку ошибок и стандартизацию ответов API.
- 
- Полная настройка ZooKeeper для масштабируемости Kafka.

### Установка

1. Клонируйте проект с репозитория.
2. Установить все зависимости с помощью Maven.

**Требования**:
- Java 9+
- Apache Kafka
- ZooKeeper
- Spring Boot
- Maven
